<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Météo Europe</title>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      fetch('/api/cities')
        .then(response => response.json())
        .then(data => {
          const dropdown = document.getElementById('city-dropdown');
          dropdown.innerHTML = '';
          data.forEach(pair => {
            const option = document.createElement('option');
            option.value = `${pair.latitude}, ${pair.longitude}`;
            option.textContent = `${pair.city}, ${pair.country}`;
            dropdown.appendChild(option);
          });

          dropdown.addEventListener('change', (event) => {
            const [ longitude, latitude ] = event.target.value.split(',');
            fetch(`/api/data?longitude=${longitude}&latitude=${latitude}`)
            .then(response => response.json())
            .then(apiData => {
              // modify as needed
              console.log(apiData);
            })
            .catch(error => console.error('Error fetching API data', error));
          });
        })
        .catch(error => console.error('Error fetching city data:', error));
    });
  </script>
</head>
<body>
  <h1>Météo Europe</h1>
  <h2>Prévisions de la semaine</h2>
  <label for="city-dropdown"> Choisissez une ville...</label>
  <select id="city-dropdown">
    <!-- Options will be populated here -->
  </select>
</body>
</html>
